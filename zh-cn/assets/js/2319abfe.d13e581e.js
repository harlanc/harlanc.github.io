"use strict";(self.webpackChunktauri_docs=self.webpackChunktauri_docs||[]).push([[474],{5680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>m});var r=t(6540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},b=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(t),b=a,m=d["".concat(l,".").concat(b)]||d[b]||u[b]||s;return t?r.createElement(m,i(i({ref:n},c),{},{components:t})):r.createElement(m,i({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,i=new Array(s);i[0]=b;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[d]="string"==typeof e?e:a,i[1]=o;for(var p=2;p<s;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}b.displayName="MDXCreateElement"},2457:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>f,contentTitle:()=>_,default:()=>k,frontMatter:()=>m,metadata:()=>y,toc:()=>g});var r=t(5680),a=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,c=(e,n,t)=>n in e?a(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,d=(e,n)=>{for(var t in n||(n={}))l.call(n,t)&&c(e,t,n[t]);if(o)for(var t of o(n))p.call(n,t)&&c(e,t,n[t]);return e},u=(e,n)=>s(e,i(n)),b=(e,n)=>{var t={};for(var r in e)l.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&o)for(var r of o(e))n.indexOf(r)<0&&p.call(e,r)&&(t[r]=e[r]);return t};const m={sidebar_position:2},_="HTTP API",y={unversionedId:"docs/httpapi/http-api",id:"docs/httpapi/http-api",title:"HTTP API",description:"\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u670d\u52a1\u7684\u76d1\u542c\u7aef\u53e3: \u914d\u7f6e\u7aef\u53e3",source:"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/docs/httpapi/http-api.md",sourceDirName:"docs/httpapi",slug:"/docs/httpapi/http-api",permalink:"/zh-cn/docs/httpapi/http-api",draft:!1,editUrl:"https://github.com/harlanc/xiu-doc/edit/main/docs/docs/httpapi/http-api.md",tags:[],version:"current",lastUpdatedAt:1719379301,formattedLastUpdatedAt:"2024\u5e746\u670826\u65e5",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docs",previous:{title:"\u7b80\u4ecb",permalink:"/zh-cn/docs/httpapi/"},next:{title:"\u5f55\u5236",permalink:"/zh-cn/docs/record/"}},f={},g=[{value:"\u67e5\u8be2\u5b9e\u65f6\u6d41\u4fe1\u606f",id:"\u67e5\u8be2\u5b9e\u65f6\u6d41\u4fe1\u606f",level:2},{value:"\u67e5\u8be2\u5168\u91cf\u6570\u636e",id:"\u67e5\u8be2\u5168\u91cf\u6570\u636e",level:3},{value:"\u67e5\u8be2\u7279\u5b9a\u7528\u6237\u7684\u6570\u636e",id:"\u67e5\u8be2\u7279\u5b9a\u7528\u6237\u7684\u6570\u636e",level:3},{value:"\u5254\u9664\u7528\u6237",id:"\u5254\u9664\u7528\u6237",level:2}],h={toc:g},v="wrapper";function k(e){var n=e,{components:t}=n,a=b(n,["components"]);return(0,r.yg)(v,u(d(d({},h),a),{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",d({},{id:"http-api"}),"HTTP API"),(0,r.yg)("p",null,"\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u670d\u52a1\u7684\u76d1\u542c\u7aef\u53e3: ",(0,r.yg)("a",d({parentName:"p"},{href:"../configurations/config-file#http-api"}),"\u914d\u7f6e\u7aef\u53e3")),(0,r.yg)("h2",d({},{id:"\u67e5\u8be2\u5b9e\u65f6\u6d41\u4fe1\u606f"}),"\u67e5\u8be2\u5b9e\u65f6\u6d41\u4fe1\u606f"),(0,r.yg)("p",null,"xiu\u5bf9\u6d41\u7684\u97f3\u89c6\u9891\u4fe1\u606f\u505a\u4e86\u4e00\u4e9b\u7edf\u8ba1\u5de5\u4f5c\uff0c\u4f8b\u5982\uff1a\u89c6\u9891\u5206\u8fa8\u7387\u3001\u7801\u7387\u3001\u5e27\u7387\u7b49\uff0c\u97f3\u9891\u7801\u7387\u3001\u91c7\u6837\u7387\u7b49\uff08\u76ee\u524d\u53ea\u652f\u6301RTMP/HTTP-FLV\u534f\u8bae\uff09\u3002\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u63a5\u53e3\u8fdb\u884c\u67e5\u8be2\uff1a"),(0,r.yg)("h3",d({},{id:"\u67e5\u8be2\u5168\u91cf\u6570\u636e"}),"\u67e5\u8be2\u5168\u91cf\u6570\u636e"),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-shell"}),"curl http://localhost:8000/api/query_whole_streams\n")),(0,r.yg)("p",null,"\u67e5\u8be2\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-json"}),'{\n    "error_code": 0,\n    "desp": "succ",\n    "data": [\n        {\n            "publisher": {\n                "id": "17105457865882",\n                "start_time": "2024-03-16T07:36:26.337103+08:00",\n                "identifier": {\n                    "rtmp": {\n                        "app_name": "live",\n                        "stream_name": "source1"\n                    }\n                },\n                "remote_address": "127.0.0.1:55687",\n                "audio": {\n                    "bitrate(kbits/s)": 128,\n                    "channels": 2,\n                    "profile": "LC",\n                    "samplerate": 44100,\n                    "sound_format": "AAC"\n                },\n                "video": {\n                    "bitrate(kbits/s)": 1802,\n                    "codec": "H264",\n                    "frame_rate": 20,\n                    "gop": 60,\n                    "height": 1280,\n                    "level": "3.0",\n                    "profile": "Main",\n                    "width": 720\n                },\n                "recv_bitrate(kbits/s)": 1802\n            },\n            "subscriber_count": 0,\n            "subscribers": {\n\n            },\n            "total_recv_bytes": 22674195,\n            "total_send_bytes": 0\n        },\n        {\n            //\u53d1\u5e03\u8005\u4fe1\u606f\n            "publisher": {\n                //uuid\n                "id": "17105458011883",\n                //\u63a8\u6d41\u5f00\u59cb\u65f6\u95f4\n                "start_time": "2024-03-16T07:36:41.109177+08:00",\n                //\u6d41\u6807\u8bc6\u4fe1\u606f\n                "identifier": {\n                    "rtmp": {\n                        "app_name": "live",\n                        "stream_name": "source"\n                    }\n                },\n                //\u5bf9\u7aef\u7684ip\u548c\u7aef\u53e3\u53f7\u4fe1\u606f\n                "remote_address": "127.0.0.1:55764",\n                //\u6d41\u7684\u97f3\u9891\u4fe1\u606f\n                "audio": {\n                    "bitrate(kbits/s)": 128,\n                    "channels": 2,\n                    "profile": "LC",\n                    "samplerate": 44100,\n                    "sound_format": "AAC"\n                },\n                //\u6d41\u7684\u89c6\u9891\u4fe1\u606f\n                "video": {\n                    "bitrate(kbits/s)": 1814,\n                    "codec": "H264",\n                    "frame_rate": 20,\n                    "gop": 60,\n                    "height": 1280,\n                    "level": "3.0",\n                    "profile": "Main",\n                    "width": 720\n                },\n                "recv_bitrate(kbits/s)": 1814\n            },\n            //\u6d41\u8ba2\u9605\u8005\u6570\u91cf\n            "subscriber_count": 2,\n            //\u6d41\u8ba2\u9605\u8005\u4fe1\u606f\n            "subscribers": {\n                "17105458497472": {\n                    //uuid\n                    "id": "17105458497472",\n                    //\u5bf9\u7aef\u7684ip\u548c\u7aef\u53e3\u53f7\u4fe1\u606f\n                    "remote_address": "127.0.0.1:56450",\n                    //\u670d\u52a1\u7aef\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u7801\u7387\n                    "send_bitrate(kbits/s)": 1943,\n                    //\u5f00\u59cb\u62c9\u6d41\u65f6\u95f4\n                    "start_time": "2024-03-16T07:37:29.034025+08:00",\n                    //\u8ba2\u9605\u7c7b\u578b\n                    "sub_type": "PlayerRtmp",\n                    //\u4ece\u5f00\u59cb\u62c9\u6d41\u5230\u67e5\u8be2\u65f6\u95f4\u70b9\u603b\u7684\u6570\u636e\u53d1\u9001\u91cf\n                    "total_send_bytes(kbits/s)": 6616470\n                },\n                "17105458720121": {\n                    "id": "17105458720121",\n                    "remote_address": "127.0.0.1:56583",\n                    "send_bitrate(kbits/s)": 2362,\n                    "start_time": "2024-03-16T07:37:52.999917+08:00",\n                    "sub_type": "PlayerHttpFlv",\n                    "total_send_bytes(kbits/s)": 1524128\n                }\n            },\n            //\u4ece\u63a8\u6d41\u5f00\u59cb\u5230\u5f53\u524d\u67e5\u8be2\u65f6\u95f4\uff0c\u6536\u5230\u7684\u6240\u6709\u6570\u636e\u91cf\n            "total_recv_bytes": 18823366,\n            //\u4ece\u63a8\u6d41\u5f00\u59cb\u5230\u5f53\u524d\u67e5\u8be2\u65f6\u95f4\uff0c\u53d1\u9001\u7ed9\u6240\u6709\u8ba2\u9605\u8005\u7684\u6570\u636e\u603b\u91cf\n            "total_send_bytes": 8762803\n        }\n    ]\n}\n')),(0,r.yg)("p",null,"\u6309\u7167\u6d41\u7684\u89c2\u4f17\u89c2\u770b\u6570\u91cf\u67e5\u8be2topN\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-shell"}),"http://localhost:8000/api/query_whole_streams?top=1\n")),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-json"}),'{\n    "error_code": 0,\n    "desp": "succ",\n    "data": [\n        {\n            "publisher": {\n                "audio": {\n                    "bitrate(kbits/s)": 128,\n                    "channels": 2,\n                    "profile": "LC",\n                    "samplerate": 44100,\n                    "sound_format": "AAC"\n                },\n                "id": "17105458011883",\n                "identifier": {\n                    "rtmp": {\n                        "app_name": "live",\n                        "stream_name": "source"\n                    }\n                },\n                "recv_bitrate(kbits/s)": 1948,\n                "remote_address": "127.0.0.1:55764",\n                "start_time": "2024-03-16T07:36:41.109177+08:00",\n                "video": {\n                    "bitrate(kbits/s)": 1948,\n                    "codec": "H264",\n                    "frame_rate": 20,\n                    "gop": 60,\n                    "height": 1280,\n                    "level": "3.0",\n                    "profile": "Main",\n                    "width": 720\n                }\n            },\n            "subscriber_count": 2,\n            "subscribers": {\n                "17105458497472": {\n                    "id": "17105458497472",\n                    "remote_address": "127.0.0.1:56450",\n                    "send_bitrate(kbits/s)": 2076,\n                    "start_time": "2024-03-16T07:37:29.034025+08:00",\n                    "sub_type": "PlayerRtmp",\n                    "total_send_bytes(kbits/s)": 74392348\n                },\n                "17105458720121": {\n                    "id": "17105458720121",\n                    "remote_address": "127.0.0.1:56583",\n                    "send_bitrate(kbits/s)": 2076,\n                    "start_time": "2024-03-16T07:37:52.999917+08:00",\n                    "sub_type": "PlayerHttpFlv",\n                    "total_send_bytes(kbits/s)": 69300006\n                }\n            },\n            "total_recv_bytes": 91712283,\n            "total_send_bytes": 154540637\n        }\n    ]\n}\n')),(0,r.yg)("h3",d({},{id:"\u67e5\u8be2\u7279\u5b9a\u7528\u6237\u7684\u6570\u636e"}),"\u67e5\u8be2\u7279\u5b9a\u7528\u6237\u7684\u6570\u636e"),(0,r.yg)("p",null,"\u652f\u6301\u4e24\u4e2a\u53c2\u6570\uff0cidentifier\u548cuuid\uff0cidentifer\u662f\u6bd4\u5fc5\u586b\u9879\uff0cuuid\u53ef\u9009\u3002"),(0,r.yg)("p",null,"\u5982\u679c\u53ea\u6307\u5b9aidentifer\uff0c\u4f1a\u8fd4\u56de\u8fd9\u4e2a\u6d41\u7684\u6240\u6709\u4fe1\u606f\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-shell"}),'curl -X POST -H "Content-Type: application/json" -d \'{\n     "identifier": {\n                "rtmp": {\n                    "app_name": "live",\n                    "stream_name": "source"\n                }\n            }\n}\' http://localhost:8000/api/query_stream\n')),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-json"}),'{\n    "error_code": 0,\n    "desp": "succ",\n    "data": [\n        {\n            "publisher": {\n                "audio": {\n                    "bitrate(kbits/s)": 128,\n                    "channels": 2,\n                    "profile": "LC",\n                    "samplerate": 44100,\n                    "sound_format": "AAC"\n                },\n                "id": "17105458011883",\n                "identifier": {\n                    "rtmp": {\n                        "app_name": "live",\n                        "stream_name": "source"\n                    }\n                },\n                "recv_bitrate(kbits/s)": 1948,\n                "remote_address": "127.0.0.1:55764",\n                "start_time": "2024-03-16T07:36:41.109177+08:00",\n                "video": {\n                    "bitrate(kbits/s)": 1948,\n                    "codec": "H264",\n                    "frame_rate": 20,\n                    "gop": 60,\n                    "height": 1280,\n                    "level": "3.0",\n                    "profile": "Main",\n                    "width": 720\n                }\n            },\n            "subscriber_count": 2,\n            "subscribers": {\n                "17105458497472": {\n                    "id": "17105458497472",\n                    "remote_address": "127.0.0.1:56450",\n                    "send_bitrate(kbits/s)": 2076,\n                    "start_time": "2024-03-16T07:37:29.034025+08:00",\n                    "sub_type": "PlayerRtmp",\n                    "total_send_bytes(kbits/s)": 74392348\n                },\n                "17105458720121": {\n                    "id": "17105458720121",\n                    "remote_address": "127.0.0.1:56583",\n                    "send_bitrate(kbits/s)": 2076,\n                    "start_time": "2024-03-16T07:37:52.999917+08:00",\n                    "sub_type": "PlayerHttpFlv",\n                    "total_send_bytes(kbits/s)": 69300006\n                }\n            },\n            "total_recv_bytes": 91712283,\n            "total_send_bytes": 154540637\n        }\n    ]\n}\n')),(0,r.yg)("p",null,"\u5982\u679c\u540c\u65f6\u6307\u5b9aidentifier\u548csubscriber\u7684uuid\uff0c\u5219\u53ea\u4fdd\u7559\u6307\u5b9asubscriber\u7684\u4fe1\u606f\uff0c\u5176\u4ed6subscriber\u7684\u4fe1\u606f\u88ab\u8fc7\u6ee4\u6389\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-shell"}),'curl -X POST -H "Content-Type: application/json" -d \'{\n     "identifier": {\n                "rtmp": {\n                    "app_name": "live",\n                    "stream_name": "source"\n                }\n            },\n     "uuid": "17105458497472"\n}\' http://localhost:8000/api/query_stream\n')),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-json"}),'{\n    "error_code": 0,\n    "desp": "succ",\n    "data": [\n        {\n            "publisher": {\n                "audio": {\n                    "bitrate(kbits/s)": 127,\n                    "channels": 2,\n                    "profile": "LC",\n                    "samplerate": 44100,\n                    "sound_format": "AAC"\n                },\n                "id": "17105458011883",\n                "identifier": {\n                    "rtmp": {\n                        "app_name": "live",\n                        "stream_name": "source"\n                    }\n                },\n                "recv_bitrate(kbits/s)": 1782,\n                "remote_address": "127.0.0.1:55764",\n                "start_time": "2024-03-16T07:36:41.109177+08:00",\n                "video": {\n                    "bitrate(kbits/s)": 1782,\n                    "codec": "H264",\n                    "frame_rate": 20,\n                    "gop": 60,\n                    "height": 1280,\n                    "level": "3.0",\n                    "profile": "Main",\n                    "width": 720\n                }\n            },\n            "subscriber_count": 2,\n            "subscribers": {\n                "17105458497472": {\n                    "id": "17105458497472",\n                    "remote_address": "127.0.0.1:56450",\n                    "send_bitrate(kbits/s)": 1910,\n                    "start_time": "2024-03-16T07:37:29.034025+08:00",\n                    "sub_type": "PlayerRtmp",\n                    "total_send_bytes(kbits/s)": 219407398\n                }\n            },\n            "total_recv_bytes": 247625063,\n            "total_send_bytes": 466366197\n        }\n    ]\n}\n')),(0,r.yg)("p",null,"\u5982\u679c\u540c\u65f6\u6307\u5b9aidentifier\u548cpublisher\u7684uuid\uff0c\u4f1a\u628a\u6240\u6709subscriber\u7684\u4fe1\u606f\u8fc7\u6ee4\u6389\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-shell"}),'curl -X POST -H "Content-Type: application/json" -d \'{\n     "identifier": {\n                "rtmp": {\n                    "app_name": "live",\n                    "stream_name": "source"\n                }\n            },\n     "uuid": "17105458011883"\n}\' http://localhost:8000/api/query_stream\n')),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-json"}),'{\n    "error_code": 0,\n    "desp": "succ",\n    "data": [\n        {\n            "publisher": {\n                "audio": {\n                    "bitrate(kbits/s)": 128,\n                    "channels": 2,\n                    "profile": "LC",\n                    "samplerate": 44100,\n                    "sound_format": "AAC"\n                },\n                "id": "17105458011883",\n                "identifier": {\n                    "rtmp": {\n                        "app_name": "live",\n                        "stream_name": "source"\n                    }\n                },\n                "recv_bitrate(kbits/s)": 1835,\n                "remote_address": "127.0.0.1:55764",\n                "start_time": "2024-03-16T07:36:41.109177+08:00",\n                "video": {\n                    "bitrate(kbits/s)": 1835,\n                    "codec": "H264",\n                    "frame_rate": 20,\n                    "gop": 60,\n                    "height": 1280,\n                    "level": "3.0",\n                    "profile": "Main",\n                    "width": 720\n                }\n            },\n            "subscriber_count": 2,\n            "subscribers": {\n\n            },\n            "total_recv_bytes": 311877631,\n            "total_send_bytes": 594871333\n        }\n    ]\n}\n')),(0,r.yg)("h2",d({},{id:"\u5254\u9664\u7528\u6237"}),"\u5254\u9664\u7528\u6237"),(0,r.yg)("p",null,"\u4e1a\u52a1\u7aef\u53ef\u4ee5\u5c06\u975e\u6cd5\u63a8\u62c9\u6d41\u7528\u6237\u8fdb\u884c\u5254\u9664\uff0c\u4f7f\u7528\u5982\u4e0b\u63a5\u53e3\uff1a"),(0,r.yg)("pre",null,(0,r.yg)("code",d({parentName:"pre"},{className:"language-shell"}),'curl -X POST -H "Content-Type: application/json" -d \'{"id": "17079922471661"}\' http://localhost:8000/kick_off_client\n')))}k.isMDXComponent=!0}}]);